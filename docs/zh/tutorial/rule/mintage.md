# 资产发行

::: tip
本文主要描述资产发行相关逻辑，并非详细的技术文档，详细技术文档会在技术黄皮书里提及。

相关词汇解释：
* **代币**： 一种数字资产。
* **铸币**： 发行代币的过程叫铸币。
* **铸币交易**： 一种特殊的交易，用户可以通过铸币交易来发行代币。
:::

## 什么是代币

在以太坊中，可以通过部署一个智能合约来发行一个代币，这个智能合约必须符合以太坊的代币标准，例如ERC20。当创建一个符合代币标准的合约时，这个合约账户拥有总发行量对应的代币，并在这个合约中维护了一个代币的持有关系。这个代币的转账交易实际上是在改变这个合约的状态，而不会改变交易双方账户的状态。

Vite支持两种类型的代币，一种是Vite原生代币vite，另一种是用户自己发行的代币。vite除了交易外还能用来获取额度，用户自己发行的代币只能用来交易。用户自己发行的代币包括可增发代币和不可增发代币。

在Vite中，用户可以发起一笔铸币交易来发行代币，铸币时，需要指定代币类型（是否可增发）、总发行量、代币名称、代币简称等，可增发代币还需要指定发行上限，交易成功后，发起铸币的账户即为新代币的所有者，持有所有新发行的代币。每个账户维护自己的代币余额。转账交易时，如果发生了代币的转入或者转出操作，交易双方的账户状态也会随之修改。

可增发代币在初始发行后，所有者可以发起一笔增发交易并指定增发代币的接收地址来增发代币，增发代币交易成功后，该代币的总发行量会随之增加。可增发代币在初始发行后，可以通过发起一笔销毁交易来销毁一定数量的代币，销毁交易成功后，该代币的总发行量也会随之减少。可增发代币的所有者权限可以转移，也可以将一种可增发代币修改为不可增发代币。

## 铸币流程

铸币时，由代币所有者发起一笔铸币交易（实际上是调用内置合约），在交易数据中指定代币相关的参数。一旦铸币交易被内置合约接收成功，内置合约会发起一笔转账交易，将总发行量的代币转账给代币的所有者。当这些交易被快照链打包确认后，代币就发行成功了。 

铸币交易需要支付一定的费用，测试网络支持通过两种方式来铸币：

* 销毁 *1000 vite*；
* 抵押 *10w vite*，抵押的vite可以在铸币成功后等待`7776000`个快照块（约3个月）后取回，取回抵押后，发行成功的代币可以继续使用。

### 参数
* 代币id：代币的唯一id，在发起铸币交易时自动生成；
* 代币名称：`1`到`40`个字符，包含大小写字母、下划线、空格，不能以空格开头或结尾，不能包含连续空格；
* 代币简称：`1`到`10`个字符，包含大小写字母、下划线、空格，不能以空格开头或结尾，不能包含连续空格；
* 总发行量totalSupply、精度decimals：$totalSupply \times 10^{decimals} \leq 2^{256}-1$；
* 代币类型：是否可增发；
* 代币发行上限maxSupply：可增发代币必填，代币发行上限高于总发行量，且 $maxSupply \leq 2^{256}-1$;
* 是否只允许所有者销毁代币：可增发代币必填，指定销毁代币的交易只能有所有者发起还是可以由任何持有代币的用户发起。

## 增发流程

可增发代币在增发时，由代币所有者发起一笔增发交易（实际上是调用内置合约），在交易数据中指定增发相关的参数。一旦增发交易被内置合约接收成功，内置合约会发起一笔转账交易，将增发的代币转账给指定账户。当这些交易被快照链打包确认后，代币就增发成功了。
 
### 参数
* 代币id：可增发代币的id；
* 增发数量：增发的代币数量，增发后 新的总发行量 = 旧的总发行量 + 增发数量，新的总发行量不能超过发行上限；
* 接收账户地址：增发代币成功后，接收增发代币的账户地址。

## 销毁流程

可增发代币在销毁时，由代币持有者发起一笔销毁交易（实际上是调用内置合约），在交易数据中指定销毁相关的参数，并将要销毁的代币随交易转账给合约。一旦销毁交易被内置合约接收成功，代币的总发行量和流通数量就会相应减少。当这些交易被快照链打包确认后，代币就销毁成功了。

如果发行代币时指定只允许所有者销毁代币，那么只允许由代币的所有者销毁代币，否则，所有的持币人都可以销毁代币。

### 参数
* 代币id：转账参数，销毁的代币id；
* 代币数量：转账参数，销毁的代币数量，销毁后 新的总发行量 = 旧的总发行量 - 销毁数量，销毁的代币会从销毁交易发起者的账户中扣除。

## Vite代币

Vite测试网络启动时，除了原生代币vite，还会发行两个代币，分别为社区活动激励积分`VCP`和测试代币`VTT`。具体参数如下：

| 代币id | 代币名称 | 代币简称 | 总发行量 | 精度 |
|:------------:|:-----------:|:-----------:|:-----------:|:-----------:|
| tti_5649544520544f4b454e6e40 | Vite Token | VITE | 10亿 | 18 |
| 以具体网络为准 | Vite Community Point | VCP | 100亿 | 0 |
| 以具体网络为准 | Vite Test Token | VTT | 10亿 | 18 |

## FAQ

* 一个账户能否发行多种代币？

可以，发起多次铸币交易即可。

* 代币名称、代币简称能否重复？

可以重复，代币名称和简称不查重。

* 铸币交易是否需要消耗配额？

铸币、增发、销毁、转移代币所有者权限、修改代币类型都需要消耗配额，具体配额数量参考 [配额使用规则](./quota.html#配额使用规则)。

* 增发交易是否需要销毁vite？

增发交易不需要销毁vite。

* 不可增发代币是否可以改成可增发代币？

不可以，只能将可增发代币单向修改为不可增发代币。

* 通过抵押的方式铸币，3个月后取回抵押后，代币是否可以继续使用？

可以继续使用。
