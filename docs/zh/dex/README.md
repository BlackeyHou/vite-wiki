# DEX 文档

:::tip 一句话描述
**ViteX**：社区治理，社区受益的**真正**去中⼼化交易所

**ViteX Coin**：全球唯一基于DAG的去中心化交易所的平台币---无预挖、无私募、100%手续费永久分红、所有权益归持币者

相关文档：[VX One Page](./one-page.html)
:::

## 特点

* **完全去中心化**
  * 交易撮合链上实现
  * 手续费分红链上实现
  * 上币链上实现，支付10000 VITE即可上币
* **运营去中心化** 
  * 任何人可当 ***运营商***
  * 运营商具有以下权限：手续费调整、暂停交易、开通交易
  * 运营商功能均在链上实现
* **通过五种方式挖矿来发行ViteX Coin**

## ViteX Coin （VX）

VX是ViteX交易所发行的新的代币，持有VX的用户会终身享受到交易所每天的**交易手续费**和**开通交易对手续费**的分红。

### VX 信息

* **总量**：  ***1亿*** （无增发）
* **最小单位**：$10^{-18}$
* **功能**：持有VX的用户可享受到交易所每天的**交易手续费**和**开通交易对手续费**的分红，并参与到交易所的**去中心化的社区治理**
* **发行方式**：***无预挖、预售，不接受投资***，用户只能通过以下五种挖矿获得。
  * 交易即挖矿：参与交易所交易，即可获得VX，VX可以持续的享受交易所的交易手续费分红。
  * 抵押挖矿：为交易所抵押VITE获得交易所运行的配额，可以获取VX代币。
  * 邀请即挖矿：邀请好友交易，好友享手续费9折，邀请人获得好友的交易手续费5%的挖矿额度。
  * 挂单挖矿：在四个基础市场挂单，享受每日总挖矿额度的10%，每个市场2.5%。
  * 上币即挖矿：注册成为运营商，既收项目方上币费，又拿VX奖励
* **释放曲线**：分两年发放，每天发放数量按比例递减。
  
### VX 释放曲线

VX总量1亿，分2年挖矿解锁，每天会有固定的数量的VX释放出来，释放规则如下：

#### 衰减方案

* 第一年：每天衰减**0.5%**，第一天释放477032.36，最后一天释放76939.48
* 第二年：每天衰减**0.2%**，第一天释放76785.60，最后一天释放37050.73

![](~/images/vx-distribute-curve.png)

### VX 分配方案

每天释放的VX按以下比例分配：

* 交易挖矿：***60%***
  * BTC 市场的交易挖矿：***15%***
  * ETH 市场的交易挖矿：***15%***
  * VITE 市场的交易挖矿：***15%***
  * 美元稳定币市场的交易挖矿：***15%***
* 抵押挖矿：***20%***
* 团队：***10%***
* 挂单挖矿：***10%***

### VX 手续费分红

每天系统将会把**分红池**的 **1%** 的币按照VX持币量分红给所有VX用户。初始分红池的资金为0。

* **以下资金会进入到分红池：**

  * 交易所的产生的所有**基础手续费**（给运营商的手续费除外）
  * 开通交易对时，缴纳的10000 VITE 上币费，其中 **5000 VITE** 进入分红池
  * 生成邀请码缴纳的 **1000 VITE** 费用

* **如何参与分红**：在交易所持有的VX数量**大于或等于10 VX**即可。（**注意**：在钱包里的VX将不参与分红，若想参与分红，需将VX充值到交易所合约）

## 挖矿方案

### 交易挖矿

用户在4 个基础交易市场（BTC、ETH、VITE、美元稳定币）交易，可获得对应基础市场的VX奖励。

* **每日释放量**： ViteX分为4个基础交易市场（***BTC、ETH、VITE、美元稳定币***），每个交易市场分别计算交易挖矿，每个市场每天VX挖矿份额为：当日VX释放量的15%
* **如何参与**：用户在 ***可挖矿*** 的交易对上交易才可参与**交易挖矿**
* **每个基础市场的分配规则**：

  按照当天用户在 **该基础市场** 里产生的 **挖矿手续费占比** 分VX给参与交易的用户。
    
    
### 抵押挖矿

用户抵押Vite给交易所合约，可以给交易所提供配额，而相应的，作为回馈，抵押Vite给交易所合约的用户可以获得一定量的VX作为奖励。

* **每日释放量**： 当日VX释放总量的 ***20%***
* **如何参与**：抵押Vite给交易所合约
* **抵押数量**：每个用户最小抵押金额：**134** VITE，抵押上限：无限制
* **抵押时间**：抵押时长无限制，用户想要取回抵押，需等待**三天**才可取回，注意：***取回抵押之后将无法继续参与抵押挖矿，若想再次参与，需再次抵押。***
* **分配规则**：按照每个用户抵押金额占比来计算挖矿所得的VX数量
  
### 挂单挖矿

用户可以在一定的价格区域内挂单，可以获得VX奖励，**挂单金额越大，时间越长，挂单位置越靠近卖单**，奖励越多。

* **每日释放量**：当日VX释放总量的**10%**，每个基础市场（四个基础市场：BTC/ETH/VITE/美元稳定币）瓜分 **2.5%** 份额
* **如何参与**：
  * 用户在 ***可挖矿*** 的交易对上挂单才可参与**挂单挖矿**
  * 只有**买单**才能参与挖矿
  * 在卖一价向下浮动 10%（不同交易对浮动区间不同），这个区间称为**挖矿区间**，只有订单处于该区间内才能挖矿。
* **计算规则**：
  
  ::::tabs
  :::tab 简单描述
  用户挂单挖矿所得的VX数量和**挂单金额，挂单时间**成线性关系，和**挂单等级**成指数关系。
  
  挂单金额和挂单时间相同的情况下，挂单等级第一档所得的vx和第十档所得得vx相差100倍。我们的目的是尽量鼓励用户向盘口挂单。
  :::
  
  :::tab 计算公式

  **名词解释**：
    * **挂单挖矿档位**：把**挖矿区间**均分分为**10档**，距离卖一越近的，挖矿权重越高，一档权重为 $0.6^1$，二挡权重为 $0.6^2$ ...... 第10档权重为 $0.6^{10}$
      
    * **挂单时长** ($T$）：某订单在 **挖矿区间** 持续的时间，超过**300**秒才作为有效时长。如果挂单时长低于**300**秒，则不计入挂单挖矿。
    
    * **挂单金额**（$a$）：用户在某一个时间范围内的未成交金额，只记录基础币金额
        
    * **挂单等级**（$g$）：用户当前挂买单与当前深度卖一订单的偏离度，偏离度 = （卖一价 - 买单价格) / 卖一价，当偏离度在10%（不同交易对范围不同）范围内才可以挖矿，且共均分为10个等级

    * **挂单恒定时间**（$t$）：指某订单在挂单金额（$a$）和挂单等级（$g$）**恒定不变**的情况下**持续存在的时间**，这个时间和上面提到的挂单时长（$T$）不一样, 某个订单挂单时长为挂单恒定时间的累加。
      
      $T = t_1 + t_2 + t_3 + ... t_n$
      
      若某订单的挂单时长低于**300**秒，则该订单视为无效订单。
      
      例如，用户在10:00:00了一个买入vite的订单，买入价：10，数量：500
      
      在10:01:00时刻，该订单被吃掉了一部分，还剩下数量：250，则此时，该订单的挂单金额变化了。
      
      在10:02:30时刻，该订单完全被吃掉，剩下数量：0，此时，该订单的挂单金额再次变化。
      
      假设在10:00:00 ~ 10:02:30区间内，**挂单等级**（$g$）未改变，则有以下**挂单恒定时间**：
      
        * 10:00:00 ~ 10:01:00时间段，有一个挂单恒定时间，时长为：60 秒
        * 10:01:00 ~ 10:02:30时间段，有一个挂单恒定时间，时长为：150 秒
            
    * **挖矿基数**（$m$）：挂单挖矿的一个量化指标，基数受到**挂单恒定时间**（$t$），**挂单金额**（$a$），**挂单等级**（$g$）三个因素影响
      
      $m = t * a * 0.6^g$
      
    * $M$：该基础交易市场下，该用户当日在所有订单挂单挖矿基数的总和。
    
      $M = m_1+ m_2 + m_3 + .....m_n$
      
    * $V$：用户当日在该基础交易市场下的挖矿所得的VX数量
    
    * $M_{all}$：该基础交易市场下，所有用户的挖矿基数的总和。
    
    * $H$：当日VX释放总量
      
  **计算**：
    
    $V =  \frac{M} { M_{all}} *0.025*H$   
  :::
  ::::
  
### 邀请挖矿
  
  用户可生成邀请码，邀请好友加入ViteX平台，
  被邀请人将享受手续费**永久**9折优惠（总手续费基础上9折：运营商手续费+基础手续费），邀请人可**永久**获得得被邀请人产生的交易手续费的 **5%** 的挖矿额度。
  
  * **如何参与**：
    * 填写 [google 表单][invitationCodeForm]，申请邀请码。
    * 邀请好友加入ViteX平台，好友填写邀请码
    
  * **如何生成邀请码**：
    * 需要消耗1000 VITE，此1000 VITE将进入[分红池][profitPool]。
    * 用户申请邀请码的功能，初期将不会开放，用户想要生成邀请码，需要向官方发起申请，通过申请的用户，官方将补贴生成邀请码所需的1000 VITE。后续邀请码申请开放之后，用户可以在钱包里自行生成邀请码（需要消耗1000 VITE）。
    
  :::warning 注意
  若同时用户是VIP用户（基础手续费减免0.1%），则计算手续费时，先减免0.1%，之后在这个基础上打9折。
  :::  
    
  * **计算规则**：
  
    邀请人将获得被邀请人每日产生的挖矿手续费的5%，作为自己的**额外挖矿手续费**，将额外获得该挖矿手续费对应比例的VX。
    
    举例一：用户小王邀请小红，假设当日小红产生100 VITE挖矿手续费，小王没有参与交易挖矿（挖矿手续费为0），但是小王邀请了小红，
    小王将获得**额外的5 VITE**（小红挖矿手续费的5%）作为挖矿手续费。所以，当日小王的挖矿手续费为5 VITE，小红为100VITE。
    
### 上币挖矿
  
  在ViteX开通交易对，只需缴纳10000 VITE，其中5000 VITE销毁，5000 VITE归入分红池，并产生1000 VITE 的挖矿手续费（即等同于：该上币用户参与交易挖矿产生了 1000 VITE 的挖矿手续费）。
  
  上币所获得的VX为：（1000 VITE / VITE基础市场所有的**挖矿手续费**） * 0.15 * 当日VX释放量 
  
  
## 手续费模型

ViteX 上产生的所有交易行为，只要撮合成功就必须缴纳手续费，订单未成交不需要缴纳手续费。

### 手续费构成 

***交易手续费 = 基础手续费 + 运营商手续费***

:::tip 提醒
不同于其他dex，ViteX挂单和撤单等操作不需要手续费，只需要付出一定配额就行。相关文档：[什么是配额](../tutorial/rule/quota.html)
:::

**基础手续费**：***0.2%***

基础手续费指系统中定义的最基本的手续费，每个交易对均相同，此手续费将积累到分红池里，归属所有VX持有人。

**运营商手续费**：***0 ~ 0.2%***

运营商手续费是由该交易对运营商设定的，可以自由调整，此部分手续费收益归运营商所有。

运营商手续费范围：最高：0.2%，最低：0


### 如何降低手续费？

#### 抵押10000 VITE成为VIP用户

用户可以选择抵押10000 VITE成为VIP用户，VIP用户**基础手续费**可减免0.1%。

最短抵押时长：**30天**

#### 填写邀请码，手续费打9折

用户可以填写邀请码，享受总手续费（基础手续费+运营商手续费）九折优惠。

:::warning
若同时用户是VIP用户（基础手续费减免0.1%），则计算手续费时，先减免0.1%，之后在这个基础上打9折。

例如：某交易对运营商手续费为0.15%，用户既是VIP用户，也填写了邀请码，则该用户在该交易对上的最终手续费为：$((0.002 - 0.001)+0.0015)*0.9 = 0.00225$
:::

## 运营商

ViteX秉承开放的原则，支持任何人基于ViteX运营自己的去中心化交易所，运营商可以自主负责上币和推广，获得交易手续费分成。

### 运营商定义

#### 链上

运营商的所有逻辑均在链上实现，对于链上来说，拥有某些币种交易对运营权限的地址，就可以称为一个运营商。

**默认情况下**：铸币人拥有着该币种运营商的权限，它可以选择将权限转移给其他人，拥有运营权限的地址就称为运营商。

#### 链下

对于链下来说，运营商是一个品牌，它可以有多个地址，每个地址控制着不同的币种的运营权限，在链下我们可以把一个运营商的多个运营地址标注称为一个运营商。

### 运营商权限

运营商权限分为两种权限，一种是针对某个交易对的运营权限，一种是针对某个币种的运营权限。

#### 币种运营权限

默认情况下，铸币人拥有着该币种运营商的权限，它可以选择将权限转移给其他人。

* **自主开通交易对**

对于某个币种来说，只有该币的运营商可以开通交易对，其他人无法开通交易对。开通的目标交易对，只能在四个基础交易对之间选择：**BTC/ETH/VITE/美元稳定币**，不能开通该币种对其他非基础交易币种的交易对。

开通交易对之后，币种运营商将获得该[交易对的运营权限][coinAuthority]，然后币种运营商可以选择将该交易对的[交易对的运营权限][coinAuthority]转移给其他地址。

:::warning
每开通一个交易对，都需要交纳10000 VITE的上币费，并且可以参与VX挖矿。相关文档：[上币挖矿][listing]
:::

* **转移币种运营权限**

用户可以将**币种运营权限**转移给其他人，转移之后该地址将不再有该**币种**的运营权限，**此操作不可逆**。


#### 交易对运营权限

* **设置运营商交易手续费**

运营商可以自由调整[运营商手续费][fee]，调整范围为：**0 ~ 0.2%**，该部分手续费收入归运营商所有。

* **暂停交易**

运营商可以某交易对的交易，暂停交易后，用户不可挂单，但是可以撤单。

* **转移运营商权限**

用户可以将**交易对运营权限**转移给其他人，转移之后该地址将不再有该**交易对**的运营权限，**此操作不可逆**。

:::warning
交易对运营权限和币种运营权限不一样，一个是针对**币种**维度的，一个是针对**交易对**维度的。

**注意**：**币种运营权限**和**交易对运营权限**并非**主从关系**。拥有币种运营权限，并不一定拥有对该币种所有交易对的运营权限，
只是在开通新交易对时，新开通的交易对的运营权限默认归**币种运营权限的拥有者**，假设**币种权限的拥有者**把该**交易对运营权限**转移给其他人之后，就不再具有对该交易对的运营权限，且此操作不可逆。

例如：某运营商有币种A的**币种运营权限**，然后开通了A-BTC和A-VITE交易对，然后将A-BTC转移给其他人，自己保留A-VITE交易对的权限。
则转移之后，该运营商将无A-BTC的运营权限，只有A-VITE的**交易对运营权限**和A的**币种运营权限**。

假设之后，该运营商再将A的**币种运营权限**转移给其他人，则该运营商将失去A的**币种运营权限**，但是还依然拥有A-VITE的**交易对运营权限**。


:::

[listing]: <#上币挖矿>
[fee]: <#手续费构成>
[coinAuthority]: <#交易对运营权限>
[invitationCodeForm]: <https://forms.gle/24FoWgWUhwqF2Bcf8>
[profitPool]: <#vx-手续费分红>
 
  
